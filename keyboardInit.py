"""
–ú–æ–¥—É–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å–∫–ª–∞–¥–æ–∫ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.
–°–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∫–ª–∞–≤–∏—à –ø–æ —Ä—É–∫–∞–º –∏ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å–∫–ª–∞–¥–æ–∫.
"""

import asyncio
import aiofiles
import pandas as pd

class CreatorBase:
    """–ë–ê–ó–û–í–´–ô –ö–õ–ê–°–° - —Ä–∞–∑–¥–µ–ª—è–µ—Ç –∫–ª–∞–≤–∏—à–∏ –Ω–∞ –ª–µ–≤—É—é –∏ –ø—Ä–∞–≤—É—é —Ä—É–∫—É"""
    def __init__(self, matrix):
        """
        matrix - –º–∞—Ç—Ä–∏—Ü–∞ –∫–ª–∞–≤–∏—à –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à –ø–æ —Å—Ç—Ä–æ–∫–∞–º)
        """
        self.matrix = matrix

    def split(self):
        """
        –†–∞–∑–¥–µ–ª—è–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –Ω–∞ –ª–µ–≤—É—é –∏ –ø—Ä–∞–≤—É—é –ø–æ–ª–æ–≤–∏–Ω—É.
        """
        left = []   # –∫–ª–∞–≤–∏—à–∏ –¥–ª—è –ª–µ–≤–æ–π —Ä—É–∫–∏
        right = []  # –∫–ª–∞–≤–∏—à–∏ –¥–ª—è –ø—Ä–∞–≤–æ–π —Ä—É–∫–∏

        for i, row in enumerate(self.matrix):
            if i == 0:  # –≤–µ—Ä—Ö–Ω–∏–π —Ä—è–¥ (—Ü–∏—Ñ—Ä—ã)
                left.append(row[:6])   # –ø–µ—Ä–≤—ã–µ 6 –∫–ª–∞–≤–∏—à - –ª–µ–≤–∞—è —Ä—É–∫–∞
                right.append(row[6:])  # –æ—Å—Ç–∞–ª—å–Ω—ã–µ - –ø—Ä–∞–≤–∞—è —Ä—É–∫–∞
            else:       # –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä—è–¥—ã (–±—É–∫–≤—ã)
                left.append(row[:5])   # –ø–µ—Ä–≤—ã–µ 5 –∫–ª–∞–≤–∏—à - –ª–µ–≤–∞—è —Ä—É–∫–∞
                right.append(row[5:])  # –æ—Å—Ç–∞–ª—å–Ω—ã–µ - –ø—Ä–∞–≤–∞—è —Ä—É–∫–∞
        return left, right


class Cortages(CreatorBase):
    """
    –ì–õ–ê–í–ù–´–ô –ö–õ–ê–°–° - —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.
    –ö–∞–∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç —á–µ—Ä—Ç–µ–∂ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã: –∫–∞–∫–∞—è –∫–ª–∞–≤–∏—à–∞ –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏ –∫–∞–∫–æ–º—É –ø–∞–ª—å—Ü—É –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç.
    """
    def __init__(self, matrix, symbols, layout_name):
        """
        matrix - —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à
        symbols - —Å–∏–º–≤–æ–ª—ã –Ω–∞ —ç—Ç–∏—Ö –∫–ª–∞–≤–∏—à–∞—Ö
        layout_name - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏ (qwerty, yaverty –∏ —Ç.–¥.)
        """
        self.matrix = matrix
        self.symbols = symbols
        self.layout_name = layout_name

        # –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã (—Å–ª–æ–≤–∞—Ä–∏) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞—Å–∫–ª–∞–¥–∫–µ:
        self.fingerKey = {}     # –ø–∞–ª–µ—Ü ‚Üí —Å–ø–∏—Å–æ–∫ –∫–ª–∞–≤–∏—à, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –Ω–∞–∂–∏–º–∞–µ—Ç
        self.bukvaKey = {}      # –Ω–æ–º–µ—Ä –∫–ª–∞–≤–∏—à–∏ ‚Üí —Å–ø–∏—Å–æ–∫ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ –Ω–µ–π
        self.bukvaFinger = {}   # —Å–∏–º–≤–æ–ª ‚Üí –ø–∞–ª–µ—Ü, –∫–æ—Ç–æ—Ä—ã–π –µ–≥–æ –Ω–∞–∂–∏–º–∞–µ—Ç
        self.shtrafKey = {}     # —à—Ç—Ä–∞—Ñ—ã –¥–ª—è –∫–ª–∞–≤–∏—à (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
        self.fingerShtraf = {}  # —à—Ç—Ä–∞—Ñ—ã –¥–ª—è –ø–∞–ª—å—Ü–µ–≤ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
        self.sym_to_finger = {} # —Å–∏–º–≤–æ–ª ‚Üí –ø–∞–ª–µ—Ü (–±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫)
        self.modifierMap = {}   # –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞—Ö (Shift, Alt)

    async def create_tuples(self):
        """
        –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–ª–∞–≤–∏—à–∏ –ø–æ –ø–∞–ª—å—Ü–∞–º —Ä—É–∫.
        """
        left, right = self.split()
        abj_left = left.copy()
        abj_left[0] = abj_left[0][1:]  # —É–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—É—é –∫–ª–∞–≤–∏—à—É –∏–∑ –≤–µ—Ä—Ö–Ω–µ–≥–æ —Ä—è–¥–∞

        # –õ–µ–≤–∞—è —Ä—É–∫–∞ - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞–≤–∏—à–∏ –ø–æ –ø–∞–ª—å—Ü–∞–º:
        self.fingerKey["lfi5"] = ('41', '02', '16', '30', '44')  # –ª–µ–≤—ã–π –º–∏–∑–∏–Ω–µ—Ü
        self.fingerKey["lfi4"] = tuple(row[1] for row in abj_left if len(row) > 1)  # –ª–µ–≤—ã–π –±–µ–∑—ã–º—è–Ω–Ω—ã–π
        self.fingerKey["lfi3"] = tuple(row[2] for row in abj_left if len(row) > 2)  # –ª–µ–≤—ã–π —Å—Ä–µ–¥–Ω–∏–π
        self.fingerKey["lfi2"] = tuple(idx for row in abj_left for idx in row[3:5] if len(row) >= 5)  # –ª–µ–≤—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–π

        # –ü—Ä–∞–≤–∞—è —Ä—É–∫–∞ - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞–≤–∏—à–∏ –ø–æ –ø–∞–ª—å—Ü–∞–º:
        self.fingerKey["rfi2"] = tuple(idx for row in right for idx in row[3:5] if len(row) >= 5)  # –ø—Ä–∞–≤—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–π
        self.fingerKey["rfi3"] = tuple(row[2] for row in right if len(row) > 2)  # –ø—Ä–∞–≤—ã–π —Å—Ä–µ–¥–Ω–∏–π
        self.fingerKey["rfi4"] = tuple(row[3] for row in right if len(row) > 3)  # –ø—Ä–∞–≤—ã–π –±–µ–∑—ã–º—è–Ω–Ω—ã–π
        self.fingerKey["rfi5"] = ('11', '12', '13', '25', '26', '27', '43', '39', '40', '53')  # –ø—Ä–∞–≤—ã–π –º–∏–∑–∏–Ω–µ—Ü

        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –æ—Å–æ–±—ã—Ö –∫–ª–∞–≤–∏—à:
        self.fingerKey["lfi2"] += ('21', '22')  # –±—É–∫–≤—ã –Ω, –≥
        self.fingerKey["lfi3"] += ('35', '36')  # –±—É–∫–≤—ã —Ä, –æ
        self.fingerKey["rfi2"] += ('49', '50')  # –±—É–∫–≤—ã —Ç, —å
        self.fingerKey["lfi5"] += ('2',)        # —Ü–∏—Ñ—Ä–∞ 1
        self.fingerKey["rfi5"] += ('7', '8')    # —Ü–∏—Ñ—Ä—ã 6, 7

        # –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–ª–∞–≤–∏—à–∏):
        self.fingerKey["lfi1"] = ('SHIFT42', 'ALT56')  # –ª–µ–≤—ã–π –±–æ–ª—å—à–æ–π –ø–∞–ª–µ—Ü

        await asyncio.sleep(0)  # –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–∞—É–∑–∞

    async def process_bukva_index(self):
        """
        –°–æ–∑–¥–∞–µ—Ç –∫–∞—Ä—Ç—É: –∫–∞–∫–∞—è –∫–ª–∞–≤–∏—à–∞ –∫–∞–∫–∏–µ —Å–∏–º–≤–æ–ª—ã —Å–æ–¥–µ—Ä–∂–∏—Ç.
        –ö–∞–∫ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –º–µ–Ω—é –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ - –∫–∞–∫–∞—è —Ç–∞—Ä–µ–ª–∫–∞ (–∫–ª–∞–≤–∏—à–∞) –∫–∞–∫–∏–µ –±–ª—é–¥–∞ (—Å–∏–º–≤–æ–ª—ã) —Å–æ–¥–µ—Ä–∂–∏—Ç.
        """
        self.modifierMap = {}

        # –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º —Ä—è–¥–∞–º —Å–∏–º–≤–æ–ª–æ–≤
        for row_idx, row in enumerate(self.symbols):
            pointer = 0  # —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ç–µ–∫—É—â—É—é –∫–ª–∞–≤–∏—à—É –≤ —Ä—è–¥—É
            last_key = None  # –ø–æ—Å–ª–µ–¥–Ω—è—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –∫–ª–∞–≤–∏—à–∞

            for tok in row:  # tok - —Å–∏–º–≤–æ–ª –∏–ª–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
                if pointer >= len(self.matrix[row_idx]):
                    break

                idx = self.matrix[row_idx][pointer]  # –Ω–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–π –∫–ª–∞–≤–∏—à–∏

                # –û–±—ã—á–Ω—ã–π —Å–∏–º–≤–æ–ª (–±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤)
                if not tok.startswith(('shift+', 'alt+')):
                    self.bukvaKey.setdefault(idx, [])
                    symbols = [tok, tok.upper()] if tok.islower() else [tok]
                    for s in symbols:
                        if s not in self.bukvaKey[idx]:
                            self.bukvaKey[idx].append(s)
                            self.modifierMap[s] = {'shift': False, 'alt': False}
                    last_key = idx
                    pointer += 1
                    continue

                # –°–∏–º–≤–æ–ª —Å Shift (–Ω–∞–ø—Ä–∏–º–µ—Ä: shift+!)
                if tok.startswith('shift+'):
                    sym = tok.split('+', 1)[1]  # —É–±–∏—Ä–∞–µ–º 'shift+'
                    self.bukvaKey.setdefault(last_key, [])
                    if sym not in self.bukvaKey[last_key]:
                        self.bukvaKey[last_key].append(sym)
                        self.modifierMap[sym] = {'shift': True, 'alt': False}
                    continue

                # –°–∏–º–≤–æ–ª —Å Alt (–Ω–∞–ø—Ä–∏–º–µ—Ä: alt+—é)
                if tok.startswith('alt+'):
                    sym = tok.split('+', 1)[1]  # —É–±–∏—Ä–∞–µ–º 'alt+'
                    pair = [sym, sym.upper()] if sym.islower() else [sym]
                    self.bukvaKey.setdefault(last_key, [])
                    for s in pair:
                        if s not in self.bukvaKey[last_key]:
                            self.bukvaKey[last_key].append(s)
                            self.modifierMap[s] = {'shift': False, 'alt': True}
                    continue

        await asyncio.sleep(0)  # –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–∞—É–∑–∞

    async def initialize(self):
        """
        –ü–æ–ª–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å–∫–ª–∞–¥–∫–∏ - –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å–æ–∑–¥–∞–Ω–∏—è.
        –ö–∞–∫ –∑–∞–ø—É—Å–∫ –∫–æ–Ω–≤–µ–π–µ—Ä–∞ –Ω–∞ –∑–∞–≤–æ–¥–µ - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ —ç—Ç–∞–ø—ã —Å–±–æ—Ä–∫–∏.
        """
        await self.create_tuples()        # 1. –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞–≤–∏—à–∏ –ø–æ –ø–∞–ª—å—Ü–∞–º
        await self.process_bukva_index()  # 2. –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ –∫–ª–∞–≤–∏—à–∞—Ö

        # –°–æ–∑–¥–∞–µ–º –±—ã—Å—Ç—Ä—É—é –∫–∞—Ä—Ç—É: —Å–∏–º–≤–æ–ª ‚Üí –ø–∞–ª–µ—Ü
        self.sym_to_finger = {}
        for finger, key_ids in self.fingerKey.items():
            for key_id in key_ids:
                for sym in self.bukvaKey.get(key_id, []):
                    self.sym_to_finger[sym] = finger


def massiveList():
    """
    –°–æ–∑–¥–∞–µ—Ç –≤—Å–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.
    –ö–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—å, –∫–æ—Ç–æ—Ä—ã–π –¥–æ—Å—Ç–∞–µ—Ç –≤—Å–µ –∫–Ω–∏–≥–∏ (—Ä–∞—Å–∫–ª–∞–¥–∫–∏) —Å –ø–æ–ª–∫–∏.
    """
    # –ú–∞—Ç—Ä–∏—Ü–∞ –∫–ª–∞–≤–∏—à - —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ –ø–æ –Ω–æ–º–µ—Ä–∞–º
    matrix = [
        ['41', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13'],
        ['16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '43'],
        ['30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40'],
        ['44', '45', '46', '47', '48', '49', '50', '51', '52', '53']
    ]

    # –†–∞—Å–∫–ª–∞–¥–∫–∞ –Ø–í–ï–†–¢–´ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ä—É—Å—Å–∫–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞)
    yaverty = [
        ['—é', '1', 'shift+!', '2', 'shift+@', '3', 'shift+—ë', '4', 'shift+–Å', '5', 'shift+—ä',
         '6', 'shift+—ä', '7', 'shift+&', '8', 'shift+*', '9', 'shift+(', '0', 'shift+)', '-', 'shift+_', '—á'],
        ['—è', '–≤', '–µ', '—Ä', '—Ç', '—ã', '—É', '–∏', '–æ', '–ø', '—à', '—â', '—ç'],
        ['–∞', '—Å', '–¥', '—Ñ', '–≥', '—Ö', '–π', '–∫', '–ª', ';', 'shift+:', '--', 'shift+"'],
        ['–∑', '—å', '—Ü', '–∂', '–±', '–Ω', '–º', ',', 'shift+<', '.', 'shift+>', '/', 'shift+?']
    ]

    # –†–∞—Å–∫–ª–∞–¥–∫–∞ –í–´–ó–û–í (–µ—â–µ –æ–¥–Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞)
    vizov = [
        ['—é', '—ë', '7', 'shift+[', '5', 'shift+{', '3', 'shift+}', '1', 'shift+(', '9', 'shift+=', '0',
         'shift+*', '2', 'shift+)', '4', 'shift++', '6', 'shift+]', '8', 'shift+!', '—â'],
        ['–±', '—ã', '–æ', '—É', 'alt+—é', '—å', '—ë', '–ª', '–¥', '—è', '–≥', '–∂', '—Ü'],
        ['—ä', '—á', 'alt+—Ü', '–∏', '–µ', 'alt+—ç', '–∞', ',', 'shift+;', '.', 'shift+:', '–Ω', 'alt+—â'],
        ['—Ç', 'alt+—ä', '—Å', '–≤', '–∑', '—à', '—Ö', '–π', '–∫', '_', 'shift+-', '—ç', '—Ä']
    ]

    # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞ QWERTY (–ô–¶–£–ö–ï–ù)
    qwerty = [
        ['—ë', '1', 'shift+!', '2', 'shift+"', '3', 'shift+‚Ññ', '4', 'shift+;', '5', 'shift+%', '6', 'shift+:', '7',
         'shift+?', '8', 'shift+*', '9', 'shift+(', '0', 'shift+)', '-', 'shift+_', '=', 'shift++'],
        ['–π', '—Ü', '—É', '–∫', '–µ', '–Ω', '–≥', '—à', '—â', '–∑', '—Ö', '—ä'],
        ['—Ñ', '—ã', '–≤', '–∞', '–ø', '—Ä', '–æ', '–ª', '–¥', '–∂', '—ç'],
        ['—è', '—á', '—Å', '–º', '–∏', '—Ç', '—å', '–±', '—é', '.']
    ]

    # –®—Ç—Ä–∞—Ñ—ã –¥–ª—è –∫–ª–∞–≤–∏—à (—Å–∫–æ–ª—å–∫–æ "—Å—Ç–æ–∏—Ç" –Ω–∞–∂–∞—Ç–∏–µ –∫–∞–∂–¥–æ–π –∫–ª–∞–≤–∏—à–∏)
    shtrafs = [
        ['6', '5', '4', '4', '4', '4', '4', '4', '4', '4', '4', '5', '6'],
        ['3', '2', '2', '2', '2', '2', '2', '2', '2', '2', '3', '5', '6'],
        ['0', '0', '0', '0', '1', '1', '0', '0', '0', '0', '1'],
        ['2', '2', '2', '2', '3', '3', '2', '2', '2', '2']
    ]

    return matrix, yaverty, vizov, qwerty, shtrafs


async def debugingFunction(layouts):
    """
    –§—É–Ω–∫—Ü–∏—è –æ—Ç–ª–∞–¥–∫–∏ - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤—Å–µ –ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω–æ –≤ —Ä–∞—Å–∫–ª–∞–¥–∫–∞—Ö.
    –ö–∞–∫ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä –Ω–∞ –∑–∞–≤–æ–¥–µ - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Å–±–æ—Ä–∫–∏.
    """
    for layout in layouts:
        print(f"\nüìã –†–∞—Å–∫–ª–∞–¥–∫–∞: {layout.layout_name}")

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–º–≤–æ–ª—ã –±–µ–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –ø–∞–ª—å—Ü–∞
        for sym, finger in layout.sym_to_finger.items():
            if finger is None:
                print(f"‚ùóÔ∏è {sym} –Ω–µ –∏–º–µ–µ—Ç –ø–∞–ª—å—Ü–∞")

        # –í—ã–≤–æ–¥–∏–º –≤—Å–µ –∫–ª–∞–≤–∏—à–∏ –∏ —Å–∏–º–≤–æ–ª—ã –Ω–∞ –Ω–∏—Ö
        for keyIndex in sorted(layout.bukvaKey.keys(), key=lambda x: int(x)):
            joined = " | ".join(layout.bukvaKey[keyIndex])
            print(f"–ö–ª–∞–≤–∏—à–∞ {keyIndex}: {joined}")

        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∏–º–≤–æ–ª—ã, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –Ω–∞ –ø—Ä–∞–≤—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–ª–µ—Ü
        for sym, finger in layout.sym_to_finger.items():
            if finger == "rfi2":
                print(f"üëâ {sym} –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ rfi2")


async def keyInitializations():
    """
    –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø - —Å–æ–∑–¥–∞–µ—Ç –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏.
    –ö–∞–∫ –≥–ª–∞–≤–Ω—ã–π —Å–±–æ—Ä–æ—á–Ω—ã–π —Ü–µ—Ö - —Å–æ–∑–¥–∞–µ—Ç –≤—Å–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Ö.
    """
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
    matrix, yaverty, vizov, qwerty, shtrafs = massiveList()

    # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–∞—Å–∫–ª–∞–¥–∫–∏
    layouts = [
        Cortages(matrix, qwerty, 'qwerty'),     # —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –π—Ü—É–∫–µ–Ω
        Cortages(matrix, vizov, 'vizov'),       # —Ä–∞—Å–∫–ª–∞–¥–∫–∞ –≤—ã–∑–æ–≤
        Cortages(matrix, yaverty, 'yaverty'),   # —Ä–∞—Å–∫–ª–∞–¥–∫–∞ —è–≤–µ—Ä—Ç—ã
        Cortages(matrix, shtrafs, '–®–¢–†–ê–§–´')     # —à—Ç—Ä–∞—Ñ—ã –¥–ª—è –∫–ª–∞–≤–∏—à
    ]

    # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Å–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
    await asyncio.gather(*(layout.initialize() for layout in layouts))

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –∫–ª–∞–≤–∏—à–∏ –∏–º–µ—é—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –ø–∞–ª—å—Ü—ã
    for layout in layouts:
        all_bukva = set(layout.bukvaKey.keys())        # –≤—Å–µ –∫–ª–∞–≤–∏—à–∏ —Å —Å–∏–º–≤–æ–ª–∞–º–∏
        all_fingers = {idx for ids in layout.fingerKey.values() for idx in ids}  # –≤—Å–µ –∫–ª–∞–≤–∏—à–∏ —Å –ø–∞–ª—å—Ü–∞–º–∏
        missing = all_bukva - all_fingers              # –∫–ª–∞–≤–∏—à–∏ –±–µ–∑ –ø–∞–ª—å—Ü–µ–≤
        if missing:
            print(f"‚ùóÔ∏è –í {layout.layout_name} –∏–Ω–¥–µ–∫—Å—ã –±–µ–∑ –ø–∞–ª—å—Ü–µ–≤: {missing}")

    # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Ç–ª–∞–¥–∫–∏
    await debugingFunction(layouts)

    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ª–æ–≤–∞—Ä—å —Å–æ –≤—Å–µ–º–∏ —Ä–∞—Å–∫–ª–∞–¥–∫–∞–º–∏
    return {
        layout.layout_name: {
            'name': layout.layout_name,           # –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏
            'bukvaKey': layout.bukvaKey,          # –∫–ª–∞–≤–∏—à–∞ ‚Üí —Å–∏–º–≤–æ–ª—ã
            'fingerKey': layout.fingerKey,        # –ø–∞–ª–µ—Ü ‚Üí –∫–ª–∞–≤–∏—à–∏
            'shtrafKey': layout.shtrafKey,        # —à—Ç—Ä–∞—Ñ—ã –∫–ª–∞–≤–∏—à (–ø—É—Å—Ç–æ)
            'fingerShtraf': layout.fingerShtraf,  # —à—Ç—Ä–∞—Ñ—ã –ø–∞–ª—å—Ü–µ–≤ (–ø—É—Å—Ç–æ)
            'modifierMap': layout.modifierMap,    # –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞—Ö
            '_sym_to_finger': layout.sym_to_finger  # —Å–∏–º–≤–æ–ª ‚Üí –ø–∞–ª–µ—Ü
        }
        for layout in layouts
    }


async def importFromFiles(textFile, digramsFile, csvFile):
    """
    –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.
    """
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç
    async with aiofiles.open(textFile, "r", encoding="utf-8") as f:
        text = await f.read()

    # –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∏–≥—Ä–∞–º–º—ã (–ø–∞—Ä—ã —Å–∏–º–≤–æ–ª–æ–≤)
    async with aiofiles.open(digramsFile, "r", encoding="utf-8") as f:
        lines = await f.readlines()
        digrams = [line.strip() for line in lines]

    # –ó–∞–≥—Ä—É–∂–∞–µ–º CSV —Ñ–∞–π–ª —Å —á–∞—Å—Ç–æ—Ç–∞–º–∏
    csvText = pd.read_csv(csvFile, header=None, sep=",")

    return text, digrams, csvText
